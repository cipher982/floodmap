# FloodMap Environment Configuration
# Copy this file to .env and customize for your deployment

# =============================================================================
# DEPLOYMENT ENVIRONMENT
# =============================================================================
ENVIRONMENT=development
# Options: development, production

# Project name (affects container names and network)
COMPOSE_PROJECT_NAME=floodmap

# =============================================================================
# DOCKER COMPOSE SETTINGS
# =============================================================================
# External port mappings (set to expose ports, leave empty for internal only)
# For local development: set these. For production: leave empty (reverse proxy handles routing)
WEBAPP_EXTERNAL_PORT=8000
TILESERVER_PORT=8080
API_PORT=8000
FRONTEND_PORT=3000

# =============================================================================
# DATA PATHS
# =============================================================================
# Production data paths used by docker-compose files
ELEVATION_SOURCE_PATH=./data/elevation-source
ELEVATION_TILES_PATH=./data/elevation-tiles
BASE_MAPS_PATH=./data/base-maps

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
# Number of elevation tiles to cache in memory
ELEVATION_CACHE_SIZE=200

# Number of generated tiles to cache
TILE_CACHE_SIZE=5000

# Rate limiting (requests per minute per IP)
RATE_LIMIT_DEFAULT=120

# Resource limits (Docker)
MEMORY_LIMIT=2G
CPU_LIMIT=1.0

# =============================================================================
# ANALYTICS
# =============================================================================
# Umami analytics configuration (for documentation only - hardcoded in HTML)
# UMAMI_WEBSITE_ID=15b5b3f8-7de9-439e-ac52-abb3f770a354
# UMAMI_SCRIPT_SRC=https://analytics.drose.io/script.js
# UMAMI_DOMAINS=drose.io
# UMAMI_ENABLED=true

# =============================================================================
# MONITORING & OBSERVABILITY (Optional)
# =============================================================================
# OpenTelemetry endpoint (e.g., ClickHouse, Jaeger, etc.)
# OTEL_EXPORTER_OTLP_ENDPOINT=https://your-monitoring.example.com/v1/traces

# Authorization header for OTEL endpoint
# OTEL_EXPORTER_OTLP_HEADERS_AUTHORIZATION=Bearer your-token-here

# Additional OTEL headers (comma-separated key=value pairs)
# OTEL_EXPORTER_OTLP_HEADERS=x-api-key=your-key,x-custom-header=value

# Service identification
SERVICE_NAME=floodmap-api
SERVICE_VERSION=2.0.0

# =============================================================================
# SECURITY & ROUTER FLAGS
# =============================================================================
# Comma-separated list of allowed hosts (e.g., yourdomain.com,api.yourdomain.com)
# For local dev, '*' is acceptable.
ALLOWED_HOSTS=*

# In production these should remain false unless explicitly needed
ENABLE_DIAGNOSTICS=false
ENABLE_PERF_TEST_ROUTES=false

# Enforce HTTPS redirects at the app layer (usually true behind a reverse proxy)
FORCE_HTTPS=true

# =============================================================================
# DATA DEPLOYMENT SETTINGS (Choose one strategy)
# =============================================================================
# Option 1: Git LFS settings (if using LFS for data)
# GIT_LFS_ENDPOINT=https://your-lfs-server.example.com

# Option 2: S3 settings for data deployment
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_DEFAULT_REGION=us-east-1
# S3_ELEVATION_BUCKET=your-bucket-name

# Option 3: Direct sync settings
# RSYNC_SOURCE=user@source-server:/path/to/elevation/data
# RSYNC_DEST=/data/floodmap/elevation
